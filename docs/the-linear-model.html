<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 The Linear Model | Statistics Tutorial</title>
  <meta name="description" content="4 The Linear Model | Statistics Tutorial" />
  <meta name="generator" content="bookdown 0.31 and GitBook 2.6.7" />

  <meta property="og:title" content="4 The Linear Model | Statistics Tutorial" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 The Linear Model | Statistics Tutorial" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="sum-of-squared-residuals.html"/>
<link rel="next" href="prediction-and-prediction-errors.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="include/webex.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Simple Linear Regression</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#intended-learning-outcomes"><i class="fa fa-check"></i><b>1.1</b> Intended Learning Outcomes</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#simple-linear-regression-1"><i class="fa fa-check"></i><b>1.2</b> Simple Linear Regression</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introducing-the-data.html"><a href="introducing-the-data.html"><i class="fa fa-check"></i><b>2</b> Introducing the Data</a>
<ul>
<li class="chapter" data-level="" data-path="introducing-the-data.html"><a href="introducing-the-data.html#loading-the-data"><i class="fa fa-check"></i>Loading the Data</a></li>
<li class="chapter" data-level="2.1" data-path="introducing-the-data.html"><a href="introducing-the-data.html#exercise-1"><i class="fa fa-check"></i><b>2.1</b> <strong>Exercise 1</strong></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="sum-of-squared-residuals.html"><a href="sum-of-squared-residuals.html"><i class="fa fa-check"></i><b>3</b> Sum of Squared Residuals</a></li>
<li class="chapter" data-level="4" data-path="the-linear-model.html"><a href="the-linear-model.html"><i class="fa fa-check"></i><b>4</b> The Linear Model</a>
<ul>
<li class="chapter" data-level="4.1" data-path="the-linear-model.html"><a href="the-linear-model.html#fitting-the-linear-model"><i class="fa fa-check"></i><b>4.1</b> Fitting the Linear Model</a></li>
<li class="chapter" data-level="4.2" data-path="the-linear-model.html"><a href="the-linear-model.html#summary-of-the-linear-model"><i class="fa fa-check"></i><b>4.2</b> Summary of the Linear Model</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="the-linear-model.html"><a href="the-linear-model.html#exercise-2"><i class="fa fa-check"></i><b>4.2.1</b> <strong>Exercise 2</strong></a></li>
<li class="chapter" data-level="4.2.2" data-path="the-linear-model.html"><a href="the-linear-model.html#exercise-3"><i class="fa fa-check"></i><b>4.2.2</b> <strong>Exercise 3</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="prediction-and-prediction-errors.html"><a href="prediction-and-prediction-errors.html"><i class="fa fa-check"></i><b>5</b> Prediction and Prediction Errors</a>
<ul>
<li class="chapter" data-level="5.1" data-path="prediction-and-prediction-errors.html"><a href="prediction-and-prediction-errors.html#exercise-4"><i class="fa fa-check"></i><b>5.1</b> <strong>Exercise 4</strong></a></li>
<li class="chapter" data-level="5.2" data-path="prediction-and-prediction-errors.html"><a href="prediction-and-prediction-errors.html#exercise-5"><i class="fa fa-check"></i><b>5.2</b> <strong>Exercise 5</strong></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="model-diagnostics.html"><a href="model-diagnostics.html"><i class="fa fa-check"></i><b>6</b> Model Diagnostics</a>
<ul>
<li class="chapter" data-level="6.1" data-path="model-diagnostics.html"><a href="model-diagnostics.html#assumptions-of-the-linear-model"><i class="fa fa-check"></i><b>6.1</b> Assumptions of the Linear Model</a></li>
<li class="chapter" data-level="6.2" data-path="model-diagnostics.html"><a href="model-diagnostics.html#how-to-check-the-assumptions-of-a-linear-model"><i class="fa fa-check"></i><b>6.2</b> How to check the assumptions of a Linear Model</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="model-diagnostics.html"><a href="model-diagnostics.html#exercise-6"><i class="fa fa-check"></i><b>6.2.1</b> <strong>Exercise 6</strong></a></li>
<li class="chapter" data-level="6.2.2" data-path="model-diagnostics.html"><a href="model-diagnostics.html#exercise-7"><i class="fa fa-check"></i><b>6.2.2</b> <strong>Exercise 7</strong></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="bringing-it-all-together.html"><a href="bringing-it-all-together.html"><i class="fa fa-check"></i><b>7</b> Bringing it all together</a>
<ul>
<li class="chapter" data-level="7.1" data-path="bringing-it-all-together.html"><a href="bringing-it-all-together.html#exercise-9"><i class="fa fa-check"></i><b>7.1</b> <strong>Exercise 9</strong></a></li>
<li class="chapter" data-level="7.2" data-path="bringing-it-all-together.html"><a href="bringing-it-all-together.html#exercise-10"><i class="fa fa-check"></i><b>7.2</b> <strong>Exercise 10</strong></a></li>
<li class="chapter" data-level="7.3" data-path="bringing-it-all-together.html"><a href="bringing-it-all-together.html#exercise-11"><i class="fa fa-check"></i><b>7.3</b> <strong>Exercise 11</strong></a></li>
<li class="chapter" data-level="7.4" data-path="bringing-it-all-together.html"><a href="bringing-it-all-together.html#exercise-12"><i class="fa fa-check"></i><b>7.4</b> <strong>Exercise 12</strong></a></li>
<li class="chapter" data-level="7.5" data-path="bringing-it-all-together.html"><a href="bringing-it-all-together.html#exercise-13"><i class="fa fa-check"></i><b>7.5</b> <strong>Exercise 13</strong></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="extra-tasks.html"><a href="extra-tasks.html"><i class="fa fa-check"></i><b>8</b> Extra Tasks</a>
<ul>
<li class="chapter" data-level="8.1" data-path="extra-tasks.html"><a href="extra-tasks.html#tasks"><i class="fa fa-check"></i><b>8.1</b> Tasks</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Statistics Tutorial</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="the-linear-model" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> The Linear Model<a href="the-linear-model.html#the-linear-model" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><br></p>
<div id="fitting-the-linear-model" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Fitting the Linear Model<a href="the-linear-model.html#fitting-the-linear-model" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As you can imagine, doing this process of minimising the sum of the squares of the residuals through trial and error is either going to a) take far too long and/or b) be very inaccurate.</p>
<p>This is why we use <code>R</code> to minimise the sums of squares of the residuals for us, and hence fit the regression line for us as well.</p>
<p>We use another function to do this, the <code>lm()</code> function i.e. the linear model function.</p>
<p>This function takes two variables, separated by a <code>~</code> with the <span class="math inline">\(y\)</span> on the left and the <span class="math inline">\(x\)</span> on the right, as in <span class="math inline">\(y \sim x\)</span>. You also tell R where to look for the variables with the usual <code>data =</code> argument. For example using our <code>runs</code> and <code>at_bats</code> example we would type:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="the-linear-model.html#cb8-1" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(runs<span class="sc">~</span>at_bats, <span class="at">data =</span> mlb11)</span></code></pre></div>
<p>According to the above code, we have saved the estimated regression and assigned it to the object <code>m1</code> as our first model. Nothing appears when we run the code because we've not asked R to show us anything, just create the object <code>m1</code>.</p>
<p>The output of this linear model function (not shown, but stored in <code>m1</code>) contains all of the information you would ever need about the model. To see it in a more condensed and accessible way you can use the summary function <code>summary()</code> on the model.</p>
<p><br></p>
</div>
<div id="summary-of-the-linear-model" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Summary of the Linear Model<a href="the-linear-model.html#summary-of-the-linear-model" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><br></p>
<p>Run the code in the code below to look at the output of model summary.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="the-linear-model.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m1)</span></code></pre></div>
<p>This looks like a daunting and unintelligible mass of information, but you will get used to seeing more of these and which parts are relevant to our needs. Let's consider the output piece by piece.</p>
<p>First, the formula used to describe the model is shown at the top (<code>lm(formula = runs ~ at_bats, data = mlb11)</code>).</p>
<p>After the formula you find the five-figure summary of the residuals. This isn't something you'll look at that often.</p>
<p>The coefficients table shown next is key; let's just have a quick reminder of the structure of a simple linear regression model so that we know exactly what the table is telling us. Recall that for our explanatory variable <span class="math inline">\(x\)</span> and our outcome variable <span class="math inline">\(y\)</span> we have that:</p>
<p><span class="math display">\[y_i = \beta_0 + \beta_1 x_i + \epsilon_i\]</span>
Recall also that <span class="math inline">\(\beta_0\)</span> is the <strong>intercept</strong> of the regression line and <span class="math inline">\(\beta_1\)</span> is the <strong>slope</strong> of the regression line.</p>
<p>Let's return to the coefficients table. Particularly important to us now is the first column, the one titled "Estimate". <strong>This gives us our <span class="math inline">\(\beta_0\)</span> and <span class="math inline">\(\beta_1\)</span> values.</strong> Namely the (Intercept) estimate is <span class="math inline">\(\beta_0\)</span> and the at_bats estimate is the slope <span class="math inline">\(\beta_1\)</span>.</p>
<p>So we can now write down our least squares estimated regression line as follows:</p>
<p><span class="math display">\[\hat{y} = -2789 + 0.6305*x_i\]</span>
<span class="math display">\[\textrm{Runs} = -2789 + 0.6305*\textrm{At-Bats}\]</span>
One last piece of information we will discuss from the summary output is the Multiple R-squared, or <span class="math inline">\(R^2\)</span>.</p>
<p><span class="math inline">\(R^2 =\)</span> <strong>The proportion of variability in the response variable that is explained by the explanatory variable</strong></p>
<p>Looking at our summary, we have an <span class="math inline">\(R^2 = 0.3729\)</span>. This means that only <span class="math inline">\(37.3\%\)</span> of the variability in the number of runs is explained by the at-bats. This is quite a low value, and implies that at-bats is not an excellent predictor of the number of runs a major league baseball team scores.</p>
<p><br></p>
<div id="exercise-2" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> <strong>Exercise 2</strong><a href="the-linear-model.html#exercise-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Create a plot to display the relationship between <code>runs</code> and <code>homeruns</code>, i.e. with <code>runs</code> as your outcome/response variable and <code>at_bats</code> as your explanatory/predictor variable. Add a title and axes labels using the same method as before.</p>
<div class="webex-solution">
<button>
Hint
</button>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="the-linear-model.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> ???, <span class="at">mapping =</span> ???) <span class="sc">+</span></span>
<span id="cb10-2"><a href="the-linear-model.html#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb10-3"><a href="the-linear-model.html#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(???)</span></code></pre></div>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="the-linear-model.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mlb11, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> homeruns, <span class="at">y =</span> runs)) <span class="sc">+</span></span>
<span id="cb11-2"><a href="the-linear-model.html#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb11-3"><a href="the-linear-model.html#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Relationship between Runs and Homeruns&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Homeruns&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Runs&quot;</span>)</span></code></pre></div>
</div>
<p><br></p>
<p><strong>Does the relationship between runs and homeruns look linear? If you knew a team’s homeruns, would you be comfortable using a linear model to predict the number of runs?</strong></p>
<div id="radio_TWPMQLDTPR" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_TWPMQLDTPR" value=""></input> <span>Yes, the relationship does appear approximately linear. However, we would not be comfortable using a linear model to predict the number of runs from the homeruns. We would have to consider a different varaible to choose.</span></label><label><input type="radio" autocomplete="off" name="radio_TWPMQLDTPR" value=""></input> <span>No, the relationship does not appear linear, and hence we would not be comfortable using a linear model to predict the number of runs from the homeruns. We would have to consider a different varaible to choose.</span></label><label><input type="radio" autocomplete="off" name="radio_TWPMQLDTPR" value="answer"></input> <span>Yes, the relationship does appear approximately linear. We would therefore be comfortable using a linear model to predict the number of runs from the homeruns</span></label><label><input type="radio" autocomplete="off" name="radio_TWPMQLDTPR" value=""></input> <span>No, the relationship does not appear linear. However, despite it's non-linearity we could still use a regression model to predict the number of runs from the homeruns.</span></label>
</div>
<p><br></p>
</div>
<div id="exercise-3" class="section level3 hasAnchor" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> <strong>Exercise 3</strong><a href="the-linear-model.html#exercise-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Fit a new model <code>m2</code> that uses <code>homeruns</code> to predict <code>runs</code>, and show a summary of your new model.</p>
<div class="webex-solution">
<button>
Hint
</button>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="the-linear-model.html#cb12-1" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(???)</span>
<span id="cb12-2"><a href="the-linear-model.html#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="the-linear-model.html#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(???)</span></code></pre></div>
</div>
<div class="webex-solution">
<button>
Solution
</button>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="the-linear-model.html#cb13-1" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(runs<span class="sc">~</span>homeruns, <span class="at">data =</span> mlb11)</span>
<span id="cb13-2"><a href="the-linear-model.html#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="the-linear-model.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(m2)</span></code></pre></div>
</div>
<p><br></p>
<p><strong>The equation of the regression line is</strong> <input class='webex-solveme nospaces' size='1' data-answer='["C"]'/></p>
<p><br></p>
<p>A: <span class="math inline">\(\textrm{Homeruns} = 1.83 + 415*\textrm{Runs}\)</span></p>
<p>B :<span class="math inline">\(\textrm{Runs} = 1.83 + 415*\textrm{Homeruns}\)</span></p>
<p>C: <span class="math inline">\(\textrm{Runs} = 415 + 1.83*\textrm{Homeruns}\)</span></p>
<p>D: <span class="math inline">\(\textrm{Homeruns} = 415 + 1.83*\textrm{Runs}\)</span></p>
<p><br></p>
<p><strong>What does the slope tell us in the context of the relationship between success of a team and its home runs?</strong></p>
<div id="radio_IDRYRNLXXB" class="webex-radiogroup">
<label><input type="radio" autocomplete="off" name="radio_IDRYRNLXXB" value="answer"></input> <span>For a unit increase in homeruns, i.e. for each additional homerun a major league baseball team hits in the season, the expected number of runs they hit in that season increases by 1.83.</span></label><label><input type="radio" autocomplete="off" name="radio_IDRYRNLXXB" value=""></input> <span>For a unit increase in homeruns, i.e. for each additional homerun a major league baseball team hits in the season, the expected number of runs they hit in that season increases by 415</span></label><label><input type="radio" autocomplete="off" name="radio_IDRYRNLXXB" value=""></input> <span>For a unit increase in runs, i.e. for each additional run a major league baseball team hits in the season, the expected number of homeruns they hit in that season increases by 1.83.</span></label><label><input type="radio" autocomplete="off" name="radio_IDRYRNLXXB" value=""></input> <span>For a unit increase in runs, i.e. for each additional run a major league baseball team hits in the season, the expected number of homeruns they hit in that season increases by 415</span></label>
</div>
<p><br></p>

</div>
</div>
</div>
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  if (t = document.getElementById("webex-total_correct")) {
    var correct = document.getElementsByClassName("webex-correct").length;
    var solvemes = document.getElementsByClassName("webex-solveme").length;
    var radiogroups = document.getElementsByClassName("webex-radiogroup").length;
    var selects = document.getElementsByClassName("webex-select").length;
    
    t.innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");
  
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");
  
  var cl = this.classList
  
  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;
  
  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }
  
  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }
  
  update_total_correct();
}

window.onload = function() {
  console.log("onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }
  
  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
  }

  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="sum-of-squared-residuals.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="prediction-and-prediction-errors.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": null,
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["main.pdf", "main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"info": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
